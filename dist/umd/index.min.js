!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("deepmerge")):"function"==typeof define&&define.amd?define(["exports","deepmerge"],t):t((e=e||self).VuexPersistence={},e.deepmerge)}(this,function(e,i){"use strict";i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,t.prototype.enqueue=function(e){return this._queue.push(e),this._flushing?Promise.resolve():this.flushQueue()},t.prototype.flushQueue=function(){function t(){var e=r._queue.shift();if(e)return e.then(t);r._flushing=!1}var r=this;this._flushing=!0;return Promise.resolve(t())};var r=t;function t(){this._queue=[],this._flushing=!1}var s={replaceArrays:{arrayMerge:function(e,t,r){return t}},concatArrays:{arrayMerge:function(e,t,r){return e.concat.apply(e,t)}}};function o(e,t,r){return i(e,t,s[r])}function n(e){var i=this,t=(this._mutex=new r,this.subscriber=function(t){return function(e){return t.subscribe(e)}},void 0===e&&(e={}),this.key=null!=e.key?e.key:"vuex",this.subscribed=!1,this.supportCircular=e.supportCircular||!1,this.supportCircular&&(a=require("flatted")),this.mergeOption=e.mergeOption||"replaceArrays",!0);try{window.localStorage.getItem("")}catch(e){t=!1}if(e.storage)this.storage=e.storage;else{if(!t)throw new Error("Neither 'window' is defined, nor 'MockStorage' is available");this.storage=window.localStorage}this.reducer=null!=e.reducer?e.reducer:null==e.modules?function(e){return e}:function(r){return e.modules.reduce(function(e,t){return o(e,((e={})[t]=r[t],e),i.mergeOption)},{})},this.filter=e.filter||function(e){return!0},this.strictMode=e.strictMode||!1;var u=this;this.RESTORE_MUTATION=function(e,t){for(var r=o(e,t||{},u.mergeOption),i=0,s=Object.keys(r);i<s.length;i++){var n=s[i];void 0!==this._vm&&void 0!==this._vm.$set?this._vm.$set(e,n,r[n]):e[n]=r[n]}},this.asyncStorage=e.asyncStorage||!1,this.asyncStorage?(this.restoreState=null!=e.restoreState?e.restoreState:function(e,t){return t.getItem(e).then(function(e){return"string"==typeof e?(i.supportCircular?a:JSON).parse(e||"{}"):e||{}})},this.saveState=null!=e.saveState?e.saveState:function(e,t,r){return r.setItem(e,i.asyncStorage?o({},t||{},i.mergeOption):(i.supportCircular?a:JSON).stringify(t))},this.plugin=function(t){t.restored=i.restoreState(i.key,i.storage).then(function(e){i.strictMode?t.commit("RESTORE_MUTATION",e):t.replaceState(o(t.state,e||{},i.mergeOption)),i.subscriber(t)(function(e,t){i.filter(e)&&i._mutex.enqueue(i.saveState(i.key,i.reducer(t),i.storage))}),i.subscribed=!0})}):(this.restoreState=null!=e.restoreState?e.restoreState:function(e,t){t=t.getItem(e);return"string"==typeof t?(i.supportCircular?a:JSON).parse(t||"{}"):t||{}},this.saveState=null!=e.saveState?e.saveState:function(e,t,r){return r.setItem(e,(i.supportCircular?a:JSON).stringify(t))},this.plugin=function(e){var t=i.restoreState(i.key,i.storage);i.strictMode?e.commit("RESTORE_MUTATION",t):e.replaceState(o(e.state,t||{},i.mergeOption)),i.subscriber(e)(function(e,t){i.filter(e)&&i.saveState(i.key,i.reducer(t),i.storage)}),i.subscribed=!0})}var a=JSON;e.MockStorage=void 0,e.VuexPersistence=n,e.default=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.min.js.map
